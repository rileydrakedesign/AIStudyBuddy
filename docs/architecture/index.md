# Class Chat AI - Brownfield Enhancement Architecture

## Table of Contents

- [Class Chat AI - Brownfield Enhancement Architecture](#table-of-contents)
  - [Table of Contents](./table-of-contents.md)
  - [Introduction](./introduction.md)
    - [Relationship to Existing Architecture](./introduction.md#relationship-to-existing-architecture)
    - [Existing Project Analysis](./introduction.md#existing-project-analysis)
      - [Current Project State](./introduction.md#current-project-state)
      - [Available Documentation](./introduction.md#available-documentation)
      - [Identified Constraints](./introduction.md#identified-constraints)
    - [Change Log](./introduction.md#change-log)
  - [Enhancement Scope and Integration Strategy](./enhancement-scope-and-integration-strategy.md)
    - [Enhancement Overview](./enhancement-scope-and-integration-strategy.md#enhancement-overview)
    - [Integration Approach](./enhancement-scope-and-integration-strategy.md#integration-approach)
      - [Code Integration Strategy](./enhancement-scope-and-integration-strategy.md#code-integration-strategy)
      - [Database Integration](./enhancement-scope-and-integration-strategy.md#database-integration)
      - [API Integration](./enhancement-scope-and-integration-strategy.md#api-integration)
      - [UI Integration](./enhancement-scope-and-integration-strategy.md#ui-integration)
    - [Compatibility Requirements](./enhancement-scope-and-integration-strategy.md#compatibility-requirements)
      - [Existing API Compatibility](./enhancement-scope-and-integration-strategy.md#existing-api-compatibility)
      - [Database Schema Compatibility](./enhancement-scope-and-integration-strategy.md#database-schema-compatibility)
      - [UI/UX Consistency](./enhancement-scope-and-integration-strategy.md#uiux-consistency)
      - [Performance Constraints](./enhancement-scope-and-integration-strategy.md#performance-constraints)
  - [Tech Stack](./tech-stack.md)
    - [Existing Technology Stack](./tech-stack.md#existing-technology-stack)
    - [New Technology Additions](./tech-stack.md#new-technology-additions)
  - [Data Models and Schema Changes](./data-models-and-schema-changes.md)
    - [New Data Models](./data-models-and-schema-changes.md#new-data-models)
      - [Saved Materials Collection (NEW)](./data-models-and-schema-changes.md#saved-materials-collection-new)
    - [Schema Extensions (Existing Collections)](./data-models-and-schema-changes.md#schema-extensions-existing-collections)
      - [User Collection Extensions](./data-models-and-schema-changes.md#user-collection-extensions)
      - [Document Collection Extensions](./data-models-and-schema-changes.md#document-collection-extensions)
      - [Chunk Collection Extensions (Python - study_materials2)](./data-models-and-schema-changes.md#chunk-collection-extensions-python-studymaterials2)
    - [Schema Integration Strategy](./data-models-and-schema-changes.md#schema-integration-strategy)
      - [Backward Compatibility Guarantees](./data-models-and-schema-changes.md#backward-compatibility-guarantees)
      - [Index Management](./data-models-and-schema-changes.md#index-management)
  - [Component Architecture](./component-architecture.md)
    - [New Components](./component-architecture.md#new-components)
      - [Frontend Components (React)](./component-architecture.md#frontend-components-react)
        - [Enhanced Sidebar Components](./component-architecture.md#enhanced-sidebar-components)
        - [Special Response Formatting Components](./component-architecture.md#special-response-formatting-components)
        - [Mobile Blocking Component](./component-architecture.md#mobile-blocking-component)
        - [Document Viewer Enhancement](./component-architecture.md#document-viewer-enhancement)
      - [Backend (Node) Components](./component-architecture.md#backend-node-components)
        - [Saved Materials Module](./component-architecture.md#saved-materials-module)
        - [Authentication Enhancement Module](./component-architecture.md#authentication-enhancement-module)
        - [Rate Limiting Middleware](./component-architecture.md#rate-limiting-middleware)
      - [Backend (Python) Components](./component-architecture.md#backend-python-components)
        - [Centralized Configuration Module](./component-architecture.md#centralized-configuration-module)
        - [Document Processing Modules](./component-architecture.md#document-processing-modules)
        - [RAG Pipeline Enhancements](./component-architecture.md#rag-pipeline-enhancements)
  - [API Design and Integration](./api-design-and-integration.md)
    - [API Integration Strategy](./api-design-and-integration.md#api-integration-strategy)
    - [New API Endpoints](./api-design-and-integration.md#new-api-endpoints)
      - [Node API (Express)](./api-design-and-integration.md#node-api-express)
        - [Saved Materials Endpoints](./api-design-and-integration.md#saved-materials-endpoints)
        - [Authentication Endpoints](./api-design-and-integration.md#authentication-endpoints)
      - [Python AI API (FastAPI)](./api-design-and-integration.md#python-ai-api-fastapi)
        - [Suggested Queries Generation](./api-design-and-integration.md#suggested-queries-generation)
    - [Modified API Endpoints](./api-design-and-integration.md#modified-api-endpoints)
      - [Node API Modifications](./api-design-and-integration.md#node-api-modifications)
      - [Python API Modifications](./api-design-and-integration.md#python-api-modifications)
  - [Source Tree](./source-tree.md)
    - [Existing Project Structure](./source-tree.md#existing-project-structure)
    - [New File Organization](./source-tree.md#new-file-organization)
    - [File Naming Conventions](./source-tree.md#file-naming-conventions)
    - [Folder Placement Rules](./source-tree.md#folder-placement-rules)
  - [Infrastructure and Deployment Integration](./infrastructure-and-deployment-integration.md)
    - [Existing Infrastructure](./infrastructure-and-deployment-integration.md#existing-infrastructure)
      - [Current Deployment Architecture](./infrastructure-and-deployment-integration.md#current-deployment-architecture)
    - [Build Process Integration](./infrastructure-and-deployment-integration.md#build-process-integration)
      - [Frontend Build](./infrastructure-and-deployment-integration.md#frontend-build)
      - [Node Backend Build](./infrastructure-and-deployment-integration.md#node-backend-build)
      - [Python AI Service Build](./infrastructure-and-deployment-integration.md#python-ai-service-build)
    - [New Dependencies to Deploy](./infrastructure-and-deployment-integration.md#new-dependencies-to-deploy)
      - [Python Service Dependencies](./infrastructure-and-deployment-integration.md#python-service-dependencies)
    - [Deployment Strategy](./infrastructure-and-deployment-integration.md#deployment-strategy)
      - [Phase 1: Infrastructure & Backend (Week 1-2)](./infrastructure-and-deployment-integration.md#phase-1-infrastructure-backend-week-1-2)
      - [Phase 2: Frontend Low-Risk Features (Week 3)](./infrastructure-and-deployment-integration.md#phase-2-frontend-low-risk-features-week-3)
      - [Phase 3: Frontend Major Features (Week 4)](./infrastructure-and-deployment-integration.md#phase-3-frontend-major-features-week-4)
      - [Phase 4: Document Format Support (Week 5)](./infrastructure-and-deployment-integration.md#phase-4-document-format-support-week-5)
    - [Environment Variables](./infrastructure-and-deployment-integration.md#environment-variables)
      - [New Environment Variables (Python Service)](./infrastructure-and-deployment-integration.md#new-environment-variables-python-service)
      - [Updated  Files](./infrastructure-and-deployment-integration.md#updated-files)
    - [Rollback Plan](./infrastructure-and-deployment-integration.md#rollback-plan)
      - [Scenario 1: Python Service Deploy Breaks RAG Pipeline](./infrastructure-and-deployment-integration.md#scenario-1-python-service-deploy-breaks-rag-pipeline)
      - [Scenario 2: Node API Deploy Breaks Authentication](./infrastructure-and-deployment-integration.md#scenario-2-node-api-deploy-breaks-authentication)
      - [Scenario 3: Frontend Deploy Breaks Navigation](./infrastructure-and-deployment-integration.md#scenario-3-frontend-deploy-breaks-navigation)
      - [Scenario 4: Tesseract Buildpack Fails](./infrastructure-and-deployment-integration.md#scenario-4-tesseract-buildpack-fails)
    - [Monitoring and Logging](./infrastructure-and-deployment-integration.md#monitoring-and-logging)
      - [Existing Logging (Enhanced)](./infrastructure-and-deployment-integration.md#existing-logging-enhanced)
      - [Metrics to Monitor Post-Deployment](./infrastructure-and-deployment-integration.md#metrics-to-monitor-post-deployment)
  - [Coding Standards](./coding-standards.md)
    - [Existing Standards Compliance](./coding-standards.md#existing-standards-compliance)
    - [Frontend (React/TypeScript)](./coding-standards.md#frontend-reacttypescript)
      - [Code Style](./coding-standards.md#code-style)
      - [Material UI Usage](./coding-standards.md#material-ui-usage)
      - [TypeScript Usage](./coding-standards.md#typescript-usage)
    - [Backend (Node/TypeScript)](./coding-standards.md#backend-nodetypescript)
      - [Code Style](./coding-standards.md#code-style)
    - [Backend (Python)](./coding-standards.md#backend-python)
      - [Code Style](./coding-standards.md#code-style)
    - [Critical Integration Rules](./coding-standards.md#critical-integration-rules)
      - [Optional Field Handling](./coding-standards.md#optional-field-handling)
      - [Logging with User Context](./coding-standards.md#logging-with-user-context)
  - [Testing Strategy](./testing-strategy.md)
    - [Testing Approach for MVP](./testing-strategy.md#testing-approach-for-mvp)
    - [Manual Testing Checklist](./testing-strategy.md#manual-testing-checklist)
      - [Auth Flows (7 Tests)](./testing-strategy.md#auth-flows-7-tests)
      - [Document Management (6 Tests)](./testing-strategy.md#document-management-6-tests)
      - [Chat & RAG (7 Tests)](./testing-strategy.md#chat-rag-7-tests)
      - [UI/UX (6 Tests)](./testing-strategy.md#uiux-6-tests)
      - [Performance (3 Tests)](./testing-strategy.md#performance-3-tests)
    - [API Testing (Backend Verification)](./testing-strategy.md#api-testing-backend-verification)
    - [Regression Testing](./testing-strategy.md#regression-testing)
    - [Future Testing Infrastructure (Post-Beta)](./testing-strategy.md#future-testing-infrastructure-post-beta)
  - [Security Integration](./security-integration.md)
    - [Existing Security Architecture Preserved](./security-integration.md#existing-security-architecture-preserved)
      - [Authentication Layer (Unchanged)](./security-integration.md#authentication-layer-unchanged)
      - [Authorization Layer (Unchanged)](./security-integration.md#authorization-layer-unchanged)
    - [New Security Features](./security-integration.md#new-security-features)
      - [1. Login Rate Limiting (FR11)](./security-integration.md#1-login-rate-limiting-fr11)
      - [2. Enhanced Input Validation (FR12)](./security-integration.md#2-enhanced-input-validation-fr12)
      - [3. Password Reset Security (FR10 - Already Implemented)](./security-integration.md#3-password-reset-security-fr10-already-implemented)
      - [4. Account Deletion Security (FR13)](./security-integration.md#4-account-deletion-security-fr13)
    - [Data Protection](./security-integration.md#data-protection)
      - [Sensitive Data Handling](./security-integration.md#sensitive-data-handling)
      - [Database Security](./security-integration.md#database-security)
    - [API Security](./security-integration.md#api-security)
      - [Rate Limiting](./security-integration.md#rate-limiting)
      - [CORS Configuration](./security-integration.md#cors-configuration)
      - [HTTPS Enforcement](./security-integration.md#https-enforcement)
    - [Frontend Security](./security-integration.md#frontend-security)
      - [XSS Prevention](./security-integration.md#xss-prevention)
      - [CSRF Prevention](./security-integration.md#csrf-prevention)
    - [Logging & Monitoring for Security](./security-integration.md#logging-monitoring-for-security)
      - [User Context Logging (FR16)](./security-integration.md#user-context-logging-fr16)
      - [Security Event Logging](./security-integration.md#security-event-logging)
    - [Security Checklist (Pre-Launch)](./security-integration.md#security-checklist-pre-launch)
  - [Conclusion](./conclusion.md)
